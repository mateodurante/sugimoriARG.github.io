<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="estilos.css">
</head>
<body>

<div class="topnav" id="myTopnav">
    <a href="#portada" class="active">Portada</a>
    <a href="#indice">Indice</a>
    <a href="#pokemon">Pokemon</a>
    <a href="#batallas">Batallas</a>
    <a href="#combate">Combate</a>
    <a href="#items">Items</a>
    <a href="#sorpresa">Sorpresa</a>
    <a href="#ligapokemon">Liga Pokemon</a>
    <a href="#pokedex">Pokedex</a>
    <a href="#modalidades">Modalidades</a>
    <a href="javascript:void(0);" class="icon" onclick="myFunction()">
        <img class="poke" src="/reglamento/iconos/poke.png" alt="poke.png">
    </a>
  </div>

<div id="paginas-reglamento">
<div id="pokemon-music">
<section id="portada">
    <img src="reglamento/paginas/01 copia.png"/> 
    <img src="reglamento/paginas/02 copia.png"/>
</section>
<section id="indice">
    <img src="reglamento/paginas/03 copia.png"/>
    <img src="reglamento/paginas/04 copia.png"/>
    <img src="reglamento/paginas/05 copia.png"/>
    <img src="reglamento/paginas/06 copia.png"/>
    <img src="reglamento/paginas/07 copia.png"/>
    <img src="reglamento/paginas/08 copia.png"/>
    <img src="reglamento/paginas/09 copia.png"/>
    <img src="reglamento/paginas/10 copia.png"/>
    <img src="reglamento/paginas/11 copia.png"/>
    <img src="reglamento/paginas/12 copia.png"/>
    <img src="reglamento/paginas/13 copia.png"/>
    <img src="reglamento/paginas/14 copia.png"/>
</section>

<section id="pokemon">
    <img src="reglamento/paginas/15 copia.png"/>
    <img src="reglamento/paginas/16 copia.png"/>
    <img src="reglamento/paginas/17 copia.png"/>
    <img src="reglamento/paginas/18 copia.png"/>
    <img src="reglamento/paginas/19 copia.png"/>
    <img src="reglamento/paginas/20 copia.png"/>
    <img src="reglamento/paginas/21 copia.png"/>
    <img src="reglamento/paginas/22 copia.png"/>
    <img src="reglamento/paginas/23 copia.png"/>
    <img src="reglamento/paginas/24 copia.png"/>
    <img src="reglamento/paginas/25 copia.png"/>
    <img src="reglamento/paginas/26 copia.png"/>
    <img src="reglamento/paginas/27 copia.png"/>
    <img src="reglamento/paginas/28 copia.png"/>
    <img src="reglamento/paginas/29 copia.png"/>
    <img src="reglamento/paginas/30 copia.png"/>
    <img src="reglamento/paginas/31 copia.png"/>
    <img src="reglamento/paginas/32 copia.png"/>
</section>
</div>

<div id="batallas-music">
<section id="batallas">
    <img src="reglamento/paginas/33 copia.png"/>
    <img src="reglamento/paginas/34 copia.png"/>
    <img src="reglamento/paginas/35 copia.png"/>
    <img src="reglamento/paginas/36 copia.png"/>
    <img src="reglamento/paginas/37 copia.png"/>
    <img src="reglamento/paginas/38 copia.png"/>
    <img src="reglamento/paginas/39 copia.png"/>
    <img src="reglamento/paginas/40 copia.png"/>
    <img src="reglamento/paginas/41 copia.png"/>
    <img src="reglamento/paginas/42 copia.png"/>
    <img src="reglamento/paginas/43 copia.png"/>
    <img src="reglamento/paginas/44 copia.png"/>
    <img src="reglamento/paginas/45 copia.png"/>
    <img src="reglamento/paginas/46 copia.png"/>
    <img src="reglamento/paginas/47 copia.png"/>
    <img src="reglamento/paginas/48b copia.png"/>
    <img src="reglamento/paginas/49 copia.png"/>
    <img src="reglamento/paginas/50 copia.png"/>
    <img src="reglamento/paginas/51 copia.png"/>
</section>
</div>

<div id="combate-items-music">
<section id="combate">
    <img src="reglamento/paginas/52 copia.png"/>
    <img src="reglamento/paginas/53 copia.png"/>
    <img src="reglamento/paginas/54 copia.png"/>
    <img src="reglamento/paginas/55 copia.png"/>
    <img src="reglamento/paginas/56 copia.png"/>
    <img src="reglamento/paginas/57 copia.png"/>
    <img src="reglamento/paginas/58 copia.png"/>
    <img src="reglamento/paginas/59 copia.png"/>
    <img src="reglamento/paginas/60 copia.png"/>
    <img src="reglamento/paginas/61 copia.png"/>
    <img src="reglamento/paginas/62 copia.png"/>
    <img src="reglamento/paginas/63 copia.png"/>
    <img src="reglamento/paginas/64 copia.png"/>
    <img src="reglamento/paginas/65 copia.png"/>
    <img src="reglamento/paginas/66 copia.png"/>
    <img src="reglamento/paginas/67 copia.png"/>
    <img src="reglamento/paginas/68 copia.png"/>
    <img src="reglamento/paginas/69 copia.png"/>
    <img src="reglamento/paginas/70 copia.png"/>
    <img src="reglamento/paginas/71 copia.png"/>
    <img src="reglamento/paginas/72 copia.png"/>
    <img src="reglamento/paginas/73 copia.png"/>
    <img src="reglamento/paginas/74 copia.png"/>
    <img src="reglamento/paginas/75 copia.png"/>
    <img src="reglamento/paginas/76 copia.png"/>
    <img src="reglamento/paginas/77 copia.png"/>
    <img src="reglamento/paginas/78 copia.png"/>
    <img src="reglamento/paginas/79 copia.png"/>
    <img src="reglamento/paginas/80 copia.png"/>
    <img src="reglamento/paginas/81 copia.png"/>
    <img src="reglamento/paginas/82 copia.png"/>
    <img src="reglamento/paginas/83 copia.png"/>
    <img src="reglamento/paginas/84 copia.png"/>
    <img src="reglamento/paginas/85 copia.png"/>
    <img src="reglamento/paginas/86 copia.png"/>
    <img src="reglamento/paginas/87 copia.png"/>
    <img src="reglamento/paginas/88 copia.png"/>
</section>

<section id="items">
    <img src="reglamento/paginas/89 copia.png"/>
    <img src="reglamento/paginas/90 copia.png"/>
    <img src="reglamento/paginas/91 copia.png"/>
    <img src="reglamento/paginas/92 copia.png"/>
    <img src="reglamento/paginas/93 copia.png"/>
    <img src="reglamento/paginas/94 copia.png"/>
</section>
</div>

<div id=otras-secciones-music>
<section id="sorpresa">
    <img src="reglamento/paginas/95 copia.png"/>
    <img src="reglamento/paginas/96 copia.png"/>
    <img src="reglamento/paginas/97 copia.png"/>
    <img src="reglamento/paginas/98 copia.png"/>
</section>

<section id="ligapokemon">
    <img src="reglamento/paginas/99 copia.png"/>
    <img src="reglamento/paginas/100 copia.png"/>
    <img src="reglamento/paginas/101 copia.png"/>
    <img src="reglamento/paginas/102 copia.png"/>
    <img src="reglamento/paginas/103 copia.png"/>
</section>

<section id="pokedex">
    <img src="reglamento/paginas/104 copia.png"/>
    <img src="reglamento/paginas/105 copia.png"/>
</section>

<section id="modalidades">
    <img src="reglamento/paginas/106 copia.png"/>
    <img src="reglamento/paginas/107 copia.png"/>
    <img src="reglamento/paginas/108 copia.png"/>
    <img src="reglamento/paginas/109 copia.png"/>
    <img src="reglamento/paginas/110 copia.png"/>
    <img src="reglamento/paginas/111 copia.png"/>
    <img src="reglamento/paginas/112 copia.png"/>
    <img src="reglamento/paginas/113 copia.png"/>
    <img src="reglamento/paginas/114 copia.png"/>
    <img src="reglamento/paginas/115 copia.png"/>
    <img src="reglamento/paginas/116 copia.png"/>
    <img src="reglamento/paginas/117 copia.png"/>
    <img src="reglamento/paginas/118 copia.png"/>
</section>
</div>  
</div>  


<script>
    function myFunction() {
      var x = document.getElementById("myTopnav");
      if (x.className === "topnav") {
        x.className += " responsive";
      } else {
        x.className = "topnav";
      }
    }

     const soundfiles = ["musica/01-32.mp3", "musica/33-51.mp3", "musica/52-94.mp3", "musica/95-118.mp3"];
     const divIds = ["pokemon-music", "batallas-music", "combate-items-music", "otras-secciones-music"];
     const els = soundfiles.map((filename, index) => {
       const el = document.createElement("audio");
       el.src = "/" + filename;
       document.body.appendChild(el);
       return el;
     })
     const playing = new Array(divIds.length).fill(false);
     window.addEventListener('scroll', (e) => {
       const scroll = e.target.body.scrollTop;
       const rects = divIds.map(id => document.getElementById(id).getBoundingClientRect());
       const tops = rects.map(rect => rect.top);

       tops.forEach((top, ind) => {

        console.log("scroll");
       console.log(scroll); 

        console.log("rects[ind]");
       console.log(rects[ind]); 

       console.log("tops");
       console.log(tops); 

       /*if (!playing[ind] && top <= rects[ind].height * 2 / 3 && top > - rects[ind].height * 1 / 3) {*/
           if (!playing[ind] && parseInt(top) <= parseInt(rects[ind].height * 2 / 3) && parseInt(top) > - parseInt(rects[ind].height * 1 / 3)) {
            console.log("AAAAAAAAA");
            console.log(els[ind]);
            console.log("menor igual a rects[ind].height * 2 / 3");
            console.log(rects[ind].height * 2 / 3);
            console.log("mayor a rects[ind].height * 1 / 3");
            console.log(rects[ind].height * 1 / 3);
            console.log("top");
            console.log(top);


            els[ind].play();
           playing[ind] = true;
         } else if (playing[ind] && (parseInt(top) > parseInt(rects[ind].height * 2 / 3) || parseInt(top) < - parseInt(rects[ind].height * 1 / 3))) {
            console.log("BBBBBBB");
            console.log(els[ind]);
            console.log("menor igual a rects[ind].height * 2 / 3");
            console.log(rects[ind].height * 2 / 3);
            console.log("mayor a rects[ind].height * 1 / 3");
            console.log(rects[ind].height * 1 / 3);
            console.log("top");
            console.log(top);


            els[ind].pause();
           playing[ind] = false;
         }
       });
     });
</script>

</body>
</html> 
